mixin webpages-include(webpages, title)
  if webpages
    if webpages.length
      h3= title + " - Total: " + webpages.length
      table.table.table-bordered.table-sm
        tr.thead-light.d-flex
          th.col-2 createdAt
          th.col-6 result
          th.col-1 size
          th.col-2 ip
          th.col-1 capture
        each webpage in webpages
          tr.d-flex.page(value=webpage._id, class={
                      "table-secondary":webpage.status>=400||(webpage.error&&!webpage.status),
                      })
            td.col-2
                  - var date = webpage.createdAt 
                  p= moment(date).format('YYYY-MM-DD HH:mm:ss.SSS')
                  p= moment(date).fromNow()
            td.col-6
              if webpage._id
                h6 id: 
                  a(href=rootPath + "page/" +webpage._id) #{webpage._id}
                  if webpage.status
                      a= " / status: " + webpage.status
                  if webpage.requests || webpage.responses
                    a= " / req:" + webpage.requests.length + " / res:" + webpage.responses.length
              .row
                  .col-2 url
                  .col-10
                    if webpage.url
                      a(href=rootPath + "search/page?url=" + encodeURIComponent(webpage.url)) 🔍
                      a(href=rootPath + "page/" +webpage._id)= webpage.url
                  //.col-2 title
                  //.col-10
                    if webpage.title
                      a(href=rootPath + "search/page?title=" + encodeURIComponent(webpage.title)) 🔍 #{webpage.title}
                  .col-2 error
                  .col-10
                    if webpage.error
                      a= webpage.error
                    else
                      a none
            td.col-1
              if webpage.content
                a= webpage.content.length
            td.col-2
              if webpage.remoteAddress
                a(href=rootPath + "search/page?ip=" + webpage.remoteAddress.ip) #{webpage.remoteAddress.ip}
              if webpage.remoteAddress.geoip
                if webpage.remoteAddress.geoip[0]
                  - var cc = webpage.remoteAddress.geoip[0].country
                  a(href=rootPath + "search/page?country=" + cc)= " (" + cc + ")"

            td.col-1
              if webpage.thumbnail
                a.colorbox(href=rootPath + "screenshot/" +webpage.screenshot)
                  img(width="100%" src="data:image/png;base64," + webpage.thumbnail)
  else
    div.alert.alert-warning
      p No data

+webpages-include(webpages, title)
