extends layout

block content
      if webpages
        if webpages.length
          h3= "total:"+webpages.length
          table.table.table-striped.table-bordered.table-hover.table-sm
            tr.thead-light.d-flex
              th.col-5 input
              th.col-4 result
              th.col-3 capture
            each webpage in webpages
              tr.d-flex.page(value=webpage._id)
                td.col-5
                  .row
                    .col-12
                      h6 url: 
                        a(href=rootPath + "search/page?input=" + encodeURIComponent(webpage.input)) 🔍 #{webpage.input}

                  .row
                    .col-3 createdAt
                    .col-9
                      a= moment(webpage.createdAt).fromNow()
                  .row
                    if webpage.option
                      each value, key in webpage.option
                        if value
                          .col-3 #{key}
                          .col-9 #{value}                      
                td.col-4
                  .row                    
                    .col-12
                        if webpage._id
                          h5 id: 
                            a(href=rootPath + "page/" +webpage._id) #{webpage._id}

                  .row
                    .col-2 url
                    .col-10
                      if webpage.url
                        if webpage.url.length > 100
                          a(href=rootPath + "search/page?url=" + webpage.url) 🔍 #{webpage.url.slice(0,100)}(truncated)
                        else
                          a(href=rootPath + "search/page?url=" + webpage.url) 🔍 #{webpage.url}
                  .row
                    .col-2 title
                    .col-10
                      if webpage.title
                        a(href=rootPath + "search/page?title=" +webpage.title) 🔍 #{webpage.title}

                  .row
                    .col-2 status
                    .col-10
                      if webpage.status
                        a= webpage.status
                  .row
                    .col-2 ip
                    .col-10
                      if webpage.remoteAddress
                        a= webpage.remoteAddress.ip                        
                      if webpage.remoteAddress.geoip
                        if webpage.remoteAddress.geoip[0]
                          a= " (" + webpage.remoteAddress.geoip[0].country + ")"

                  .row
                    .col-2 error
                    .col-10
                      if webpage.error
                        a= webpage.error
                      else
                        a= "none"

                td.col-3
                  if webpage.thumbnail
                    a.colorbox(href=rootPath + "screenshot/" +webpage.screenshot)
                      img(src="data:image/png;base64," + webpage.thumbnail)
      else
        div.alert.alert-warning
          p No data