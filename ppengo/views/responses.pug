extends layout

block content
  .jumbotoron
    h1 Responses
      a(href=rootPath+"page/"+pageId) #{pageId}
  if webpages
    if webpages.length
      h2= "total:" + webpages.length
      table.table.table-striped.table-bordered.table-hover.table-sm
        tr.thead-light.d-flex
          th.col-3 createdAt
          th.col-3 url
          th.col-1 status
          th.col-1 size
          th.col-2 remoteAddress
          th.col-2 securityDetails
        each webpage in webpages
          tr.d-flex
            td.col-3= moment(webpage.createdAt).format('YYYY-MM-DDTHH:mm:ss.SSSZ')
            td.col-3
              a(href=rootPath + "response/" +webpage._id) #{webpage.url}
            td.col-1= webpage.status
            td.col-1
              if webpage.payload
                p= webpage.payload.length
              //if webpage.text
                p= "text: " + webpage.text.length
            td.col-2
              a(href=rootPath + "search/response?ip=" +webpage.remoteAddress.ip) #{webpage.remoteAddress.ip}
            td.col-2
              a(href=rootPath + "search/response?issuer=" +webpage.securityDetails.issuer) #{webpage.securityDetails.issuer}

  else
    div.alert.alert-warning
      p No data